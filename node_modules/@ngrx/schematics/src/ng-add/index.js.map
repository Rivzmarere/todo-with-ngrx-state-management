{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../../modules/schematics/src/ng-add/index.ts"],"names":[],"mappings":";;AAAA,yDAMoC;AACpC,+DAI8C;AAG9C,SAAS,eAAe,CACtB,IAAU,EACV,GAAM,EACN,KAAU;IAEV,IAAM,SAAS,GAAG,qBAAY,CAAC,IAAI,CAAC,CAAC;IACrC,IAAM,IAAI,GAAG,yBAAgB,CAAC,IAAI,CAAC,CAAC;IACpC,SAAS,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;IACvB,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;AAC3D,CAAC;AAED,SAAS,sBAAsB;IAC7B,IAAM,GAAG,GAAG;QACV,iBAAiB,EAAE,kBAAkB;KACtC,CAAC;IACF,OAAO,UAAC,IAAU;QAChB,eAAe,CAAC,IAAI,EAAE,KAAK,EAAE,GAAG,CAAC,CAAC;QAClC,OAAO,IAAI,CAAC;IACd,CAAC,CAAC;AACJ,CAAC;AAED,mBAAyB,OAAyB;IAChD,OAAO,UAAC,IAAU,EAAE,OAAyB;QAC3C,OAAO,kBAAK,CAAC;YACX,OAAO,IAAI,OAAO,CAAC,iBAAiB,CAAC,CAAC,CAAC,sBAAsB,EAAE,CAAC,CAAC,CAAC,iBAAI,EAAE;SACzE,CAAC,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;IACpB,CAAC,CAAC;AACJ,CAAC;AAND,+BAMC","sourcesContent":["import {\n  Rule,\n  SchematicContext,\n  Tree,\n  chain,\n  noop,\n} from '@angular-devkit/schematics';\nimport {\n  WorkspaceSchema,\n  getWorkspacePath,\n  getWorkspace,\n} from '../../schematics-core/utility/config';\nimport { Schema as SchematicOptions } from './schema';\n\nfunction updateWorkspace<K extends keyof WorkspaceSchema>(\n  host: Tree,\n  key: K,\n  value: any\n) {\n  const workspace = getWorkspace(host);\n  const path = getWorkspacePath(host);\n  workspace[key] = value;\n  host.overwrite(path, JSON.stringify(workspace, null, 2));\n}\n\nfunction setAsDefaultSchematics() {\n  const cli = {\n    defaultCollection: '@ngrx/schematics',\n  };\n  return (host: Tree) => {\n    updateWorkspace(host, 'cli', cli);\n    return host;\n  };\n}\n\nexport default function (options: SchematicOptions): Rule {\n  return (host: Tree, context: SchematicContext) => {\n    return chain([\n      options && options.defaultCollection ? setAsDefaultSchematics() : noop(),\n    ])(host, context);\n  };\n}\n"]}